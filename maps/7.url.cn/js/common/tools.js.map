{"version":3,"sources":["js/common/tools.js"],"names":["T","HOST","location","protocol","host","join","showMsg","msg","share","ok","tmpl","$msg","$","length","document","body","append","$box","find","html","show","css","marginLeft","width","marginTop","height","off","one","hide","showTips","tips","timeout","$tips","data","on","setTimeout","showTipsMsg","innerText","style","visibility","shareData","imgUrl","eq","attr","title","link","href","desc","shareTo","WeixinApi","ready","Api","forEach","method","confirm","resp"],"mappings":"AACA,GAAIA,GAAI,WAEJ,GAAIA,MACAC,GAAQC,SAASC,SAAU,KAAMD,SAASE,MAAMC,KAAK,GAuFzD,OArFAL,GAAEM,QAAU,SAASC,EAAKC,EAAOC,GAC7B,GAAIC,GAAO,6MAQPC,EAAOC,EAAE,OACRD,GAAKE,SACND,EAAEE,SAASC,MAAMC,OAAON,GACxBC,EAAOC,EAAE,QAEb,IAAIK,GAAON,EAAKO,KAAK,OACrBD,GAAKC,KAAK,OAAOC,KAAKZ,GACtBI,EAAKS,OACLH,EAAKI,KACDC,WAAYL,EAAKM,QAAU,GAC3BC,UAAWP,EAAKQ,SAAW,KAG/Bd,EAAKe,IAAI,QAAS,cAAcC,IAAI,QAAS,aAAc,WACvDhB,EAAKiB,OACLpB,GAASA,MACVkB,IAAI,QAAS,WAAWC,IAAI,QAAS,UAAW,WAC/ChB,EAAKiB,OACLnB,GAAMA,OAIdT,EAAE6B,SAAW,SAASC,EAAMC,GACxB,GAAIrB,GAAO,mFACPsB,EAAQpB,EAAE,QACToB,GAAMnB,SACPD,EAAEE,SAASC,MAAMC,OAAON,GACxBsB,EAAQpB,EAAE,UAEdoB,EAAMd,KAAK,KAAKC,KAAKW,GAChBE,EAAMC,KAAK,WACZD,EAAMC,KAAK,UAAU,GAAIC,GAAG,QAAS,aAAc,WAC/CF,EAAMJ,SAGdG,GAAWI,WAAW,WAClBH,EAAMJ,QACPG,GACHC,EAAMZ,QAGVpB,EAAEoC,YAAc,SAAS7B,EAAKwB,GAC1B,GAAIrB,GAAO,+BACPC,EAAOC,EAAE,eACRD,GAAKE,SACND,EAAEE,SAASC,MAAMC,OAAON,GACxBC,EAAOC,EAAE,iBAEbD,EAAOA,EAAK,GACZA,EAAK0B,UAAY9B,EACjBI,EAAK2B,MAAMC,WAAa,UACxBR,GAAWI,WAAW,WAClBxB,EAAK2B,MAAMC,WAAa,UACzBR,IAGP/B,EAAEwC,WACEC,OAAUxC,EAAOW,EAAE,aAAa8B,GAAG,GAAGC,KAAK,OAC3CC,MAAS9B,SAAS8B,MAClBC,KAAQ3C,SAAS4C,KACjBC,KAAQ,IAGZ/C,EAAEQ,MAAQ,WAEN,GAAIwC,IAAW,gBAAiB,kBAAmB,eAAgB,eAEnEC,WAAUC,MAAM,SAASC,GACrBH,EAAQI,QAAQ,SAASC,GACrBF,EAAIE,IAAWF,EAAIE,GAAQrD,EAAEwC,WACzBc,QAAS,SAASC,YAM3BvD","file":"js/common/tools.js","sourcesContent":["/* global WeixinApi */\r\nvar T = (function() {\r\n\r\n    var T = {};\r\n    var HOST = [location.protocol, \"//\", location.host].join(\"\");\r\n\r\n    T.showMsg = function(msg, share, ok) {\r\n        var tmpl = '' +\r\n            '<div id=\"msg\"><div class=\"box\">' +\r\n            '<div class=\"hd\">提示</div>' +\r\n            '<div class=\"bd\"></div>' +\r\n            '<div class=\"ft\">' +\r\n            '<a class=\"btn-ok\" href=\"javascript:;\">确定</a>' +\r\n            '<a class=\"btn-share\" href=\"javascript:;\">分享</a>' +\r\n            '</div></div></div>';\r\n        var $msg = $(\"#msg\");\r\n        if (!$msg.length) {\r\n            $(document.body).append(tmpl);\r\n            $msg = $(\"#msg\");\r\n        }\r\n        var $box = $msg.find(\".box\");\r\n        $box.find(\".bd\").html(msg);\r\n        $msg.show();\r\n        $box.css({\r\n            marginLeft: $box.width() / -2,\r\n            marginTop: $box.height() / -2\r\n        });\r\n        // callback\r\n        $msg.off(\"click\", \".btn-share\").one(\"click\", \".btn-share\", function() {\r\n            $msg.hide();\r\n            share && share();\r\n        }).off(\"click\", \".btn-ok\").one(\"click\", \".btn-ok\", function() {\r\n            $msg.hide();\r\n            ok && ok();\r\n        });\r\n    };\r\n\r\n    T.showTips = function(tips, timeout) {\r\n        var tmpl = '<div id=\"tips\"><i class=\"icon-arrow\"></i><p></p><a class=\"btn-close\">×</a></div>';\r\n        var $tips = $(\"#tips\");\r\n        if (!$tips.length) {\r\n            $(document.body).append(tmpl);\r\n            $tips = $(\"#tips\");\r\n        }\r\n        $tips.find(\"p\").html(tips);\r\n        if (!$tips.data(\"inited\")) {\r\n            $tips.data(\"inited\", !0).on(\"click\", \".btn-close\", function() {\r\n                $tips.hide();\r\n            });\r\n        }\r\n        timeout && setTimeout(function() {\r\n            $tips.hide();\r\n        }, timeout);\r\n        $tips.show();\r\n    };\r\n\r\n    T.showTipsMsg = function(msg, timeout) {\r\n        var tmpl = '<div id=\"tip_message\"></div>';\r\n        var $msg = $(\"#tip_message\");\r\n        if (!$msg.length) {\r\n            $(document.body).append(tmpl);\r\n            $msg = $(\"#tip_message\");\r\n        }\r\n        $msg = $msg[0];\r\n        $msg.innerText = msg;\r\n        $msg.style.visibility = 'visible';\r\n        timeout && setTimeout(function(){\r\n            $msg.style.visibility = 'hidden';\r\n        }, timeout);\r\n    };\r\n\r\n    T.shareData = {\r\n        \"imgUrl\": HOST + $(\"img.share\").eq(0).attr(\"src\"),\r\n        \"title\": document.title,\r\n        \"link\": location.href,\r\n        \"desc\": \"\"\r\n    };\r\n\r\n    T.share = function() {\r\n\r\n        var shareTo = [\"shareToFriend\", \"shareToTimeline\", \"shareToWeibo\", \"generalShare\"];\r\n\r\n        WeixinApi.ready(function(Api) {\r\n            shareTo.forEach(function(method) {\r\n                Api[method] && Api[method](T.shareData, {\r\n                    confirm: function(resp) {}\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    return T;\r\n\r\n})();"],"sourceRoot":"/source/"}